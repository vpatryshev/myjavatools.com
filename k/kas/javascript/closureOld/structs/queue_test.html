<!DOCTYPE html>

<!--
Copyright 2006 Google Inc.
 All Rights Reserved.
-->

<html>
<head>
<title>goog.structs.Queue</title>
<script type="text/javascript" src="../structs/queue.js"></script>
<script type="text/javascript">
  goog.basePath = '../';
</script>
</head>
<body>
<script type="text/javascript">

goog.globalize(goog.structs);

function stringifyQueue(q) {
  // do not have access to elements, so using internal variables
  var s = '';
  for (var i = q.head_; i < q.tail_; i++) {
    s += q.elements_[i];
  }
  return s;
}

function createQueue() {
  var q = new Queue();
  q.enqueue('a');
  q.enqueue('b');
  q.enqueue('c');
  return q;
}

function testConstructor() {
  var q = new Queue();
  assertTrue('testConstructor(), queue should be empty initially', q.isEmpty());
  assertEquals('testConstructor(), count should be 0', q.getCount(), 0);
  assertEquals('testConstructor(), head element should be undefined', q.peek(), 
      undefined);
}

function testCount() {
  var q = createQueue();
  assertEquals('testCount(), count should be 3', q.getCount(), 3);
  q.enqueue('d');
  assertEquals('testCount(), count should be 4', q.getCount(), 4);
  q.dequeue();
  assertEquals('testCount(), count should be 3', q.getCount(), 3);
  q.clear();
  assertEquals('testCount(), count should be 0', q.getCount(), 0);
}

function testEnqueue() {
  var q = new Queue();
  q.enqueue('a');
  assertEquals('testEnqueue(), count should be 1', q.getCount(), 1);
  q.enqueue('b');
  assertEquals('testEnqueue(), count should be 2', q.getCount(), 2);
  assertEquals('testEnqueue(), head element should be a', q.peek(), 'a');
  q.dequeue();
  assertEquals('testEnqueue(), count should be 1', q.getCount(), 1);
  assertEquals('testEnqueue(), head element should be b', q.peek(), 'b');
}

function testDequeue() {
  var q = createQueue();
  var head = q.dequeue();
  assertEquals('testDequeue(), should return a', head, 'a');
  q.dequeue();
  head = q.dequeue();
  assertEquals('testDequeue(), should return c', head, 'c');
  assertTrue('testDequeue(), queue should be empty', q.isEmpty());
  head = q.dequeue();
  assertEquals('testDequeue(), should return undefined for empty queue', head,
      undefined);
}

function testPeek() {
  var q = createQueue();
  var head = q.peek();
  assertEquals('testPeek(), should return a', head, 'a');
  var head2 = q.dequeue();
  assertEquals('testPeek(), dequeue should return peek() result', head, head2);
  head = q.peek();
  assertEquals('testPeek(), should return b', head, 'b');
  q.clear();
  head = q.peek();
  assertEquals('testPeek(), should return undefined for empty queue', head,
      undefined); 
}

function testClear() {
  var q = createQueue();
  q.clear();
  assertTrue('testClear(), queue should be empty', q.isEmpty());
}

function testQueue() {
  var q = createQueue();
  assertEquals('testQueue(), contents must be abc', stringifyQueue(q), 'abc');
}

</script>
</body>
</html>

