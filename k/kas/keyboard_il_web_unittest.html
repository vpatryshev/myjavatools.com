<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Onscreen Keyboard Test Suite. Unittest for keyboard.js</title>
<!--
Javascript unittest file. See instructions in the body.
Script paths are relative to location of this file.
Author: vpatryshev
-->
  <script src="http://mw1.google.com/staticfiles/keyboard/bin/d_il_002.js"></script>
  <script src="javascript/keyboard/unittest_util.js"></script>
  <script src="../third_party/java/jsunit/jsunit2.2/app/jsUnitCore.js"></script>
</head>
<body>
This is a javascript unittest for <code>bin/d_il_002.js</code><br>
To run the test, you have to open in your browser the following file:<br>
<code>google3/third_party/java/jsunit/jsunit2.2/testRunner.html</code><br>
and enter the location of this test file into the file name field,
and click 'Run' button.
<textarea rows="2" cols="50" id="testarea"></textarea>
<script type="text/javascript">
  var testMsgHebrew = '\u05de\u05e7\u05dc\u05d3\u05ea ' +
      '\u05e2\u05d1\u05e8\u05d9\u05ea';
  var testMsgEnglish = "English";
  var testMsgRussian = '\u0420\u0443\u0441\u0441\u043a\u0438\u0439';
  var testMsgArabic = '\u0627\u0644\u0639\u0631\u0628\u064a\u0629';

  var titleInactive = span(' \u05de\u05e7\u05dc\u05d3\u05ea');
  var titleHebrewActive =
      '<abbr title="Hebrew keyboard">' +
      '&nbsp;&nbsp;&nbsp;' + testMsgHebrew + '</abbr>&nbsp;&nbsp;' +
      '<a ' +
      'onmouseover="this.style.textDecoration=\'underline\'" ' +
      'onmouseout="this.style.textDecoration=\'none\'" ' +
      'onclick="_kbdS2(\'EN\');">English</a>&nbsp;&nbsp;' +
      '<a ' +
      'onmouseover="this.style.textDecoration=\'underline\'" ' +
      'onmouseout="this.style.textDecoration=\'none\'" ' +
      'onclick="_kbdS2(\'RU\');">' + testMsgRussian + '</a>&nbsp;&nbsp;'+
      '<a ' +
      'onmouseover="this.style.textDecoration=\'underline\'" ' +
      'onmouseout="this.style.textDecoration=\'none\'" ' +
      'onclick="_kbdS2(\'AR\');">' + testMsgArabic + '</a>'
  ;

  function setUp() {
    var input = document.getElementById('testarea');
    input.value = '';
    input.focus();
  }

  function testSaveRestore() {
    checkSaveRestore(titleInactive, 'KBD=0HE3');
  }

  function testTitleInactive() {
    checkInactiveTitle(titleInactive);
  }

  function testTitleActive() {
    checkActiveTitle(titleHebrewActive);
  }

  function testTypeRu() {
    activateKeyboard();
    var input = document.getElementById('testarea');
    assertEquals('', input.value);
    _kbdS2('RU');
    type('Heccrfz rkfdbfnehf');
    assertEquals('\u0420\u0443\u0441\u0441\u043a\u0430\u044f' +
                 '\u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u0430',
                 input.value);
  }

  function testTypeHe() {
    activateKeyboard();
    _kbdS2('HE');
    var input = document.getElementById('testarea');
    assertEquals('', input.value);
    type('ERTYUIOPertyuiop');
    assertEquals("Got " + show(input.value),
                 'ERTYUIOP\u05e7\u05e8\u05d0\u05d8\u05d5\u05df\u05dd\u05e4',
                 input.value);
  }

  function testTypeAr() {
    activateKeyboard();
    _kbdS2('AR');
    var input = document.getElementById('testarea');
    assertEquals('', input.value);
    type('QWERTYUIOPqwertyuiop');
    var expected =
        '\u064e\u064b\u064f\u064c\u0644\u0625\u0625\u2018\u00f7\u00d7\u061b' +
        '\u0636\u0635\u062b\u0642\u0641\u063a\u0639\u0647\u062e\u062d';
    assertEquals("Got " + show(input.value) + "\nvs " + show(expected),
                 expected,
                 input.value);
  }

  function testTypeEn() {
    activateKeyboard();
    _kbdS2('EN');
    var input = document.getElementById('testarea');
    assertEquals('', input.value);
    type('ONCE UPON A MIDNIGHT DREARY, while I pondered, weak and weary');
    assertEquals('ONCEUPONAMIDNIGHTDREARYwhileIponderedweakandweary',
        input.value); // no space bar here! :)
  }
</script>
</body>
</html>
